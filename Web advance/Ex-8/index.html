<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h2>Username</h2>
    <input id="name" type="text" style="width:200px">
    <h2>Password</h2>
    <input id="password" type="password"  style="width:200px">
    <h2>Email</h2>
    <input id="email" type="email"  style="width:200px">
    <div style="margin-top: 30px;margin-left: 50px;"><button type="button" onclick="signup()">Sign Up</button></div>
    <p id="error"></p>
    <p>Already have account?<a href="login.html"></a></p>
    <script>
        function signup(){
            let listusername=[];
            let listpassword=[];
            let listemail=[];
            let error="";
            const name= document.getElementById("name").value;
            const password= document.getElementById("password").value;
            const email= document.getElementById("email").value;
            if(localStorage.getItem("listusername")!==null){
                listusername=JSON.parse(localStorage.getItem("listusername"))
            }
            if(localStorage.getItem("listusername")!==null){
                listemail=JSON.parse(localStorage.getItem("listemail"))
            }
            if(localStorage.getItem("listusername")!==null){
                listpassword=JSON.parse(localStorage.getItem("listpassword"))
            }
            if(listusername.findIndex(function(user){
                return user===name;
            })== -1 && listemail.findIndex(function(user){
                return user===email;
            })== -1){
                listusername.push(name);
                listpassword.push(password);
                document.getElementById("error").innerHTML="successfully sign up"
                location.replace("file:///C:/Users/QUANG%20VINH/Desktop/Web%20advance/Ex-8/login.html")
            }
            else{
                error="Username Exists";
                document.getElementById("error").innerHTML=error;
            }
            
            
            localStorage.setItem("listusername",JSON.stringify(listusername));
            localStorage.setItem("listpassword",JSON.stringify(listpassword));
            localStorage.setItem("listemail",JSON.stringify(listemail));


        }
        // let listemail=[];
        // let listpassword=[];
        // let listusername=[];
        // let error="";
        // listemail=localStorage.getItem("listemail");
        // listpassword=localStorage.getItem("listpassword");
        // listusername=localStorage.getItem("listusername");
        // const username=document.getElementById("username").value;
        // const email=document.getElementById("email").value;
        // const password=document.getElementById("password").value;
        // if(listusername.findIndex(username)===-1){
        //     listusername.push(username);
        // }
        // else{
        //     error="Account have existed";
        //     document.getElementById("error").innerHTML=error;
        // }
        // localStorage.setItem("listusername",JSON.stringify(listusername));
        // if(listemail.findIndex(email)===-1){
        //     listemail.push(email);
        // }
        // else{
        //     error="Account have existed";
        //     document.getElementById("error").innerHTML=error;
        // }
        // localStorage.setItem("listemail",JSON.stringify(listemail));
        // if(listpassword.findIndex(password)===-1){
        //     listpassword.push(password);
        // }
        // else{
        //     error="Account have existed";
        //     document.getElementById("error").innerHTML=error;
        // }
        // localStorage.setItem("listpassword",JSON.stringify(listpassword));
        
    </script>
</body>
</html>